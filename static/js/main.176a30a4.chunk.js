(this.webpackJsonpbatterygauge=this.webpackJsonpbatterygauge||[]).push([[0],{272:function(t,e,a){t.exports=a(495)},277:function(t,e,a){},278:function(t,e,a){},279:function(t,e,a){},280:function(t,e,a){},491:function(t,e,a){},495:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(18),o=a.n(i),l=(a(277),a(278),a(134),a(45)),c=a(46),s=a(51),h=a(50),m=(a(279),a(280),a(508)),d=(a(512),a(511)),u=a(514),g=a(517),f=a(33),v=Object(f.a)(),p=(a(96),Object(m.a)({root:{position:"relative",width:"100%",height:"100%",top:"5%",left:"5%",transform:"translate(-5%,-5%)"},media:{height:70},stat:{marginBottom:10}}));function O(t){p();var e=parseFloat(t.latest.voltage);e=e.toFixed(2);var a=t.latest.time,n=a.length;a=a.substr(1,n-2);var i=t.data.length;0!=t.data[i-2].voltage&&(t.data[i-1].voltage,t.data[i-2].voltage,t.data[i-2].voltage);return r.a.createElement(u.a,{className:"card",onClick:function(){v.push({pathname:"/Chart",state:t.data,dataKey:"voltage"})},hoverable:!0,bordered:!0},r.a.createElement(g.a,{gutterBottom:!0,variant:"h5",component:"h1"},"Voltage"),r.a.createElement(g.a,{style:{marginTop:10},variant:"h4",component:"h1"},e))}a(515);var b=Object(m.a)({root:{position:"relative",width:"100%",height:"100%",top:"5%",left:"5%",transform:"translate(-5%,-5%)"},media:{height:70},stat:{marginBottom:10}});function E(t){b();var e=parseFloat(t.latest.current);e=e.toFixed(2);var a=t.latest.time,n=a.length;a=a.substr(1,n-2);var i=t.data.length;0!=t.data[i-2].current&&(t.data[i-1].current,t.data[i-2].current,t.data[i-2].current);return r.a.createElement(u.a,{className:"card",onClick:function(){v.push({pathname:"/Chart",state:t.data,dataKey:"current"})},hoverable:!0,bordered:!0},r.a.createElement(g.a,{gutterBottom:!0,variant:"h5",component:"h1"},"Current"),r.a.createElement(g.a,{style:{marginTop:10},variant:"h4",component:"h1"},e))}var S=Object(m.a)({root:{position:"relative",width:"100%",height:"100%",top:"5%",left:"5%",transform:"translate(-5%,-5%)"},media:{height:70},stat:{marginBottom:10}});function y(t){S();var e=parseFloat(t.latest.SOC);e=e.toFixed(2);var a=t.latest.time,n=a.length;a=a.substr(1,n-2);var i=t.data.length;0!=t.data[i-2].SOC&&(t.data[i-1].SOC,t.data[i-2].SOC,t.data[i-2].SOC);return r.a.createElement(u.a,{className:"card",onClick:function(){v.push({pathname:"/Chart",state:t.data,dataKey:"SOC"})},hoverable:!0,bordered:!0},r.a.createElement(g.a,{gutterBottom:!0,variant:"h5",component:"h1"},"SOC"),r.a.createElement(g.a,{style:{marginTop:10},variant:"h4",component:"h1"},e))}var C=Object(m.a)({root:{position:"relative",width:"100%",height:"100%",top:"5%",left:"5%",transform:"translate(-5%,-5%)"},media:{height:70},stat:{marginBottom:10}});function k(t){C();var e=parseFloat(t.latest.SOHR);e=e.toFixed(2);var a=t.latest.time,n=a.length;a=a.substr(1,n-2);var i=t.data.length;0!=t.data[i-2].SOHR&&(t.data[i-1].SOHR,t.data[i-2].SOHR,t.data[i-2].SOHR);return r.a.createElement(u.a,{className:"card",onClick:function(){v.push({pathname:"/Chart",state:t.data,dataKey:"SOHR"})},hoverable:!0,bordered:!0},r.a.createElement(g.a,{gutterBottom:!0,variant:"h5",component:"h1"},"SOHR"),r.a.createElement(g.a,{style:{marginTop:10},variant:"h4",component:"h1"},e))}var x=Object(m.a)({root:{position:"relative",width:"100%",height:"100%",top:"5%",left:"5%",transform:"translate(-5%,-5%)"},media:{height:70},stat:{marginBottom:10}});function A(t){x();var e=parseFloat(t.latest.SOHC);e=e.toFixed(2);var a=t.latest.time,n=a.length;a=a.substr(1,n-2);var i=t.data.length;0!=t.data[i-2].SOHC&&(t.data[i-1].SOHC,t.data[i-2].SOHC,t.data[i-2].SOHC);return r.a.createElement(u.a,{className:"card",onClick:function(){v.push({pathname:"/Chart",state:t.data,dataKey:"SOHC"})},hoverable:!0,bordered:!0},r.a.createElement(g.a,{gutterBottom:!0,variant:"h5",component:"h1"},"SOHC"),r.a.createElement(g.a,{style:{marginTop:10},variant:"h4",component:"h1"},e))}Object(m.a)((function(t){return{root:{flexGrow:1},paper:{padding:t.spacing(2),height:180,textAlign:"center",color:t.palette.text.secondary},card:{marginLeft:10,marginRight:0,marginTop:0,marginBottom:0,height:180}}}));var H=a(26),j=(n.PureComponent,a(133)),R=a(121),w=a(513),L=function(t){Object(s.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).data=t.data,n.onOk=n.onOk.bind(Object(R.a)(n)),n}return Object(c.a)(a,[{key:"onChange",value:function(t,e){}},{key:"onOk",value:function(t){console.log("onOk: ",t),this.props.callback(t)}},{key:"render",value:function(){var t=w.a.RangePicker;return r.a.createElement(t,{showTime:{format:"HH"},format:"YYYY-MM-DD HH:00",onChange:this.onChange,onOk:this.onOk})}}]),a}(n.PureComponent),B=(a(53),a(237)),F=function(t){Object(s.a)(a,t);var e=Object(h.a)(a);function a(t){var n;Object(l.a)(this,a),(n=e.call(this,t)).data=t.data,n.firstData=t.data,n.initialState={data:t.data,refAreaLeft:"",refAreaRight:"",animation:!0},n.state=n.initialState,n.key=t.showKey,n.x_arr={};for(var r=1;r<t.data.length;r++)n.x_arr[t.data[r].time]=r;return n.width=0,document.body.clientWidth<450?n.width=document.body.clientWidth:n.width=.9*document.body.clientWidth,n.height=.6*document.body.clientHeight,console.log("chart",n.initialState.data),console.log("chart key",t),console.log("chart x_arr",n.x_arr),n}return Object(c.a)(a,[{key:"componentWillReceiveProps",value:function(t,e){var a=t.data;this.initialState={data:a,refAreaLeft:"",refAreaRight:"",animation:!0},this.setState({data:t.data,refAreaLeft:"",refAreaRight:"",animation:!0}),this.key=t.showKey;for(var n={},r=1;r<a.length;r++)n[a[r].time]=r;this.x_arr=n,this.data=a,console.log("next_arr",this.x_arr)}},{key:"zoom",value:function(){var t=this,e=this.state,a=e.refAreaLeft,n=e.refAreaRight;e.data;if(a!==n&&""!==n){if(a=this.x_arr[a],n=this.x_arr[n],a>n){var r=[n,a];a=r[0],n=r[1]}this.setState((function(){return{refAreaLeft:"",refAreaRight:"",data:t.data.slice(a,n+1)}}))}else this.setState((function(){return{refAreaLeft:"",refAreaRight:""}}))}},{key:"zoomOut",value:function(){var t=this;this.state.data;this.setState((function(){return{data:t.initialState.data,refAreaLeft:"",refAreaRight:""}}))}},{key:"back",value:function(){var t=this;this.setState((function(){return{data:t.firstData,refAreaLeft:"",refAreaRight:""}})),this.initialState.data=this.firstData}},{key:"handleAreaLeft",value:function(t){try{this.setState({refAreaLeft:t.activeLabel})}catch(e){console.log(e)}}},{key:"handleAreaRight",value:function(t){try{this.setState({refAreaRight:t.activeLabel})}catch(e){console.log(e)}}},{key:"render",value:function(){var t=this,e=this.state,a=e.data,n=(e.left,e.right,e.refAreaLeft),i=e.refAreaRight,o=[0,100];return"voltage"==this.key?(o[0]=705,o[1]=706):"current"==this.key&&(o[0]=-5,o[1]=5),r.a.createElement("div",{className:"highlight-bar-charts",style:{userSelect:"none"}},r.a.createElement(H.d,{width:this.width,height:this.height,data:a,onMouseDown:function(e){return t.handleAreaLeft(e)},onMouseMove:function(e){return t.state.refAreaLeft&&t.handleAreaRight(e)},onMouseUp:this.zoom.bind(this)},r.a.createElement(H.a,{strokeDasharray:"3 3"}),r.a.createElement(H.g,{allowDecimals:!1,dataKey:"time"}),r.a.createElement(H.h,{type:"number",domain:o}),r.a.createElement(H.f,null),r.a.createElement(H.b,null),r.a.createElement(H.c,{type:"monotone",dataKey:this.key,stroke:"#8884d8",activeDot:{r:8}}),n&&i?r.a.createElement(H.e,{x1:n,x2:i,strokeOpacity:.3}):null),r.a.createElement(B.a,{className:"btn update",onClick:this.zoomOut.bind(this),style:{position:"relative"}},"Zoom Out"))}}]),a}(n.PureComponent);a(491);function D(t){var e=t.location.state,a=e.length,n=e.slice(a-20,a),i=t.location.dataKey,o=(e[0].time.length,r.a.useState("1min")),l=Object(j.a)(o,2),c=(l[0],l[1],r.a.useState([])),s=Object(j.a)(c,2),h=(s[0],s[1],r.a.useState(n)),m=Object(j.a)(h,2),d=m[0];m[1];return r.a.createElement("div",{id:"chart"},r.a.createElement(F,{data:d,showKey:i}))}var N=a(236),_=function(t){Object(s.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={bound:[],isLoading:!1,latestData:{},voltage:[],current:[],SOC:[],SOHR:[],SOHC:[]},n}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var t=this;this.setState({isLoading:!0});var e={},a=[],n=[],r=[],i=[],o=[];fetch("/BMS_Realtime_output.csv").then((function(t){return t.text()})).then((function(l){var c=l.split("\n"),s=c.length;t.setState({dataLines:c});var h=c[s-1].split(",");console.log(h),e={time:h[0],voltage:h[1],current:h[2],SOC:h[3],SOHR:h[4],SOHC:h[5]},console.log(e),t.setState({latestData:e});for(var m=1;m<s;m++){var d={},u={},g={},f={},v={},p=c[m].split(",");d.time=p[0],d.voltage=parseFloat(p[1]),u.time=p[0],u.current=parseFloat(p[2]),g.time=p[0],g.SOC=parseFloat(p[3]),f.time=p[0],f.SOHR=parseFloat(p[4]),v.time=p[0],v.SOHC=parseFloat(p[5]),a.push(d),n.push(u),r.push(g),i.push(f),o.push(v)}JSON.stringify(a),JSON.stringify(n),console.log(a),t.setState({voltage:a,current:n,SOC:r,SOHR:i,SOHC:o}),t.setState({isLoading:!1})}))}},{key:"getData",value:function(t){this.setState({bound:t})}},{key:"render",value:function(){var t=this.state,e=t.latestData,a=t.isLoading,n=t.voltage,i=t.current,o=t.SOC,l=t.SOHR,c=t.SOHC;if(a)return r.a.createElement("div",null,"Please Wait");var s=e.time,h=s.length;return s=s.substr(1,h-2),r.a.createElement("div",{id:"content"},r.a.createElement(d.a,{container:!0,spacing:3},r.a.createElement(d.a,{item:!0,lg:12,md:12,xs:12},r.a.createElement(N.Battery,{size:180,percent:parseFloat(e.SOC).toFixed(2),color:"rgb(46,139,87)"}),r.a.createElement("br",null),r.a.createElement("h3",{style:{fontWeight:800,textAlign:"center"}},"Your battery is under good condition"),r.a.createElement("h4",{style:{textAlign:"center"}},"Updated:",s)),r.a.createElement(d.a,{item:!0,lg:12,md:12,xs:12},r.a.createElement(L,{callback:this.getData})),r.a.createElement(d.a,{item:!0,lg:4,md:8,xs:12},r.a.createElement(O,{data:n,latest:e})),r.a.createElement(d.a,{item:!0,lg:4,md:8,xs:12},r.a.createElement(E,{data:i,latest:e})),r.a.createElement(d.a,{item:!0,lg:4,md:8,xs:12},r.a.createElement(y,{data:o,latest:e})),r.a.createElement(d.a,{item:!0,lg:4,md:8,xs:12},r.a.createElement(k,{data:l,latest:e})),r.a.createElement(d.a,{item:!0,lg:4,md:8,xs:12},r.a.createElement(A,{data:c,latest:e})),r.a.createElement(d.a,{item:!0,lg:4,md:8,xs:12},r.a.createElement(d.a,{id:"footer",container:!0,spacing:1},r.a.createElement(d.a,{item:!0,lg:9,md:9,xs:9},r.a.createElement("div",null,r.a.createElement("h3",{className:"info"},"The Smart Battery Gauge"),r.a.createElement("h3",{className:"info"},"North Carolina State University - ADAC LAB -"),r.a.createElement("br",null),r.a.createElement("h3",{className:"info"},"\xa9 2020"))),r.a.createElement(d.a,{item:!0,lg:3,md:3,xs:3},r.a.createElement("div",null,r.a.createElement("div",{id:"pic"},r.a.createElement("a",{href:"https://research.ece.ncsu.edu/adac/",title:"Click to visit the offical website"},r.a.createElement("img",{id:"logo",src:"/ADAC_logo.jpg"})))))))))}}]),a}(n.PureComponent);var K=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(159),M=a(23),T=function(t){Object(s.a)(a,t);var e=Object(h.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(M.b,{history:v},r.a.createElement(M.c,null,r.a.createElement(M.a,{path:"/",exact:!0,component:K}),r.a.createElement(M.a,{path:"/Chart",component:D})))}}]),a}(n.Component);o.a.render(r.a.createElement(W.a,null,r.a.createElement("div",null,r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},96:function(t,e,a){}},[[272,1,2]]]);
//# sourceMappingURL=main.176a30a4.chunk.js.map